# โ ะคัะฝะบัะธะพะฝะฐะป ะฟะพะดะฟะธัะบะธ ะธ ะพัะฟะธัะบะธ - ะะพัะพะฒะพ!

## ะงัะพ ะฑัะปะพ ะดะพะฑะฐะฒะปะตะฝะพ

### 1. ๐ง ะกััะฐะฝะธัะฐ ะพัะฟะธัะบะธ (`/unsubscribe`)

**URL:** `/unsubscribe?email=user@example.com`

#### ะะพะทะผะพะถะฝะพััะธ:
- โ ะัะฟะธัะบะฐ ะฟะพ email ะธะท URL
- โ ะัะฟะธัะบะฐ ะฐะฒัะพัะธะทะพะฒะฐะฝะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
- โ ะฃะดะฐะปะตะฝะธะต ะธะท `profiles.newsletter_enabled`
- โ ะฃะดะฐะปะตะฝะธะต ะธะท `newsletter_subscribers`
- โ ะัะฐัะธะฒะพะต ะพัะพัะผะปะตะฝะธะต ั ะธะบะพะฝะบะฐะผะธ
- โ ะกะพะพะฑัะตะฝะธะต ะพะฑ ััะฟะตัะฝะพะน ะพัะฟะธัะบะต
- โ ะะพะทะผะพะถะฝะพััั ะฒะตัะฝััััั ะฝะฐ ัะฐะนั

#### ะัะฟะพะปัะทะพะฒะฐะฝะธะต:

**ะะท ะฟะธััะผะฐ:**
```
ะะพะปัะทะพะฒะฐัะตะปั ะบะปะธะบะฐะตั "Abmelden" โ 
ะะตัะตัะพะดะธั ะฝะฐ /unsubscribe?email=ะธั_email โ
ะะฒัะพะผะฐัะธัะตัะบะธ ะพัะฟะธััะฒะฐะตััั
```

**ะะฒัะพัะธะทะพะฒะฐะฝะฝัะน ะฟะพะปัะทะพะฒะฐัะตะปั:**
```
ะะตัะตัะพะดะธั ะฝะฐ /unsubscribe โ
ะะฒัะพะผะฐัะธัะตัะบะธ ะพัะฟะธััะฒะฐะตััั (ะธัะฟะพะปัะทัะตั ัะฒะพะน profile)
```

---

### 2. ๐ค ะะฐัััะพะนะบะธ ะฟะพะดะฟะธัะบะธ ะฒ ะฟัะพัะธะปะต

**URL:** `/profile`

#### ะะพะฑะฐะฒะปะตะฝะพ:
- โ ะงะตะบะฑะพะบั "Ich mรถchte Newsletter erhalten"
- โ ะะฟะธัะฐะฝะธะต ะฟัะตะธะผััะตััะฒ ะฟะพะดะฟะธัะบะธ
- โ ะกะพััะฐะฝะตะฝะธะต ะฒ ะฑะฐะทั ะดะฐะฝะฝัั (`newsletter_enabled`)
- โ ะะบะพะฝะบะฐ Bell ะดะปั ะฒะธะทัะฐะปัะฝะพะณะพ ะพัะพัะผะปะตะฝะธั

#### ะะฐะบ ัะฐะฑะพัะฐะตั:

1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั `/profile`
2. ะะธะดะธั ัะตะบัะธั "Newsletter-Einstellungen"
3. ะะพะถะตั ะฒะบะปััะธัั/ะฒัะบะปััะธัั ะฟะพะดะฟะธัะบั ัะตะบะฑะพะบัะพะผ
4. ะะฐะถะธะผะฐะตั "Speichern"
5. ะกัะฐััั ัะพััะฐะฝัะตััั ะฒ ะะ

---

### 3. ๐ ะกััะปะบะฐ ะพัะฟะธัะบะธ ะฒ ะฟะธััะผะฐั

ะะฐะถะดะพะต ะฟะธััะผะพ ัะตะฟะตัั ัะพะดะตัะถะธั ะฟะตััะพะฝะฐะปัะฝัั ัััะปะบั ะพัะฟะธัะบะธ:

```html
<a href="https://yoursite.com/unsubscribe?email=user@example.com">
    Abmelden
</a>
```

**ะัะตะธะผััะตััะฒะฐ:**
- โ ะะฐะฑะพัะฐะตั ะฑะตะท ะฐะฒัะพัะธะทะฐัะธะธ
- โ GDPR-compliant (ะพะฑัะทะฐัะตะปัะฝะพะต ััะตะฑะพะฒะฐะฝะธะต)
- โ ะะดะธะฝ ะบะปะธะบ ะดะปั ะพัะฟะธัะบะธ
- โ ะะตััะพะฝะฐะปัะฝะฐั ัััะปะบะฐ ะดะปั ะบะฐะถะดะพะณะพ ะฟะพะปััะฐัะตะปั

---

## ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

### ะกัะตะฝะฐัะธะน 1: ะะพะปัะทะพะฒะฐัะตะปั ะบะปะธะบะฐะตั "Abmelden" ะฒ ะฟะธััะผะต

```
1. Email ัะพะดะตัะถะธั: /unsubscribe?email=john@example.com
2. ะะพะปัะทะพะฒะฐัะตะปั ะบะปะธะบะฐะตั ัััะปะบั
3. ะัะบััะฒะฐะตััั ัััะฐะฝะธัะฐ /unsubscribe
4. ะะฒัะพะผะฐัะธัะตัะบะธ:
   - profiles.newsletter_enabled = false (ะณะดะต email = john@example.com)
   - DELETE FROM newsletter_subscribers WHERE email = john@example.com
5. ะะพะบะฐะทัะฒะฐะตััั: "Erfolgreich abgemeldet" โ
```

### ะกัะตะฝะฐัะธะน 2: ะะพะปัะทะพะฒะฐัะตะปั ัะฟัะฐะฒะปัะตั ะฟะพะดะฟะธัะบะพะน ะฒ ะฟัะพัะธะปะต

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะปะพะณะธะฝะธััั
2. ะัะบััะฒะฐะตั /profile
3. ะะธะดะธั ัะตะบะฑะพะบั "Ich mรถchte Newsletter erhalten"
4. ะกะฝะธะผะฐะตั ะณะฐะปะพัะบั
5. ะะฐะถะธะผะฐะตั "Speichern"
6. ะ ะะ: profiles.newsletter_enabled = false
7. ะะพะบะฐะทัะฒะฐะตััั: "Ihre Daten wurden erfolgreich gespeichert!"
```

### ะกัะตะฝะฐัะธะน 3: ะะพะฒัะพัะฝะฐั ะฟะพะดะฟะธัะบะฐ

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั /profile
2. ะกัะฐะฒะธั ะณะฐะปะพัะบั "Ich mรถchte Newsletter erhalten"
3. ะะฐะถะธะผะฐะตั "Speichern"
4. ะ ะะ: profiles.newsletter_enabled = true
5. ะกะฝะพะฒะฐ ะฟะพะปััะฐะตั ัะฐัััะปะบะธ! ๐ง
```

---

## ะะฐะทะฐ ะดะฐะฝะฝัั

### ะขะฐะฑะปะธัะฐ: `profiles`

```sql
-- ะกัะฐััั ะฟะพะดะฟะธัะบะธ ััะฐะฝะธััั ะทะดะตัั
newsletter_enabled BOOLEAN DEFAULT false
```

**ะะพะณะธะบะฐ:**
- `true` โ ะะพะปัะทะพะฒะฐัะตะปั ะฟะพะปััะฐะตั ัะฐัััะปะบะธ
- `false` โ ะะพะปัะทะพะฒะฐัะตะปั ะะ ะฟะพะปััะฐะตั ัะฐัััะปะบะธ

### ะขะฐะฑะปะธัะฐ: `newsletter_subscribers`

```sql
-- ะะพะดะฟะธััะธะบะธ ะฑะตะท ะฐะบะบะฐัะฝัะฐ
email VARCHAR(255) UNIQUE NOT NULL
```

**ะะพะณะธะบะฐ:**
- ะัะธ ะพัะฟะธัะบะต โ ัะดะฐะปัะตััั ะธะท ัะฐะฑะปะธัั
- ะัะธ ะฟะพะดะฟะธัะบะต ัะตัะตะท ัะพัะผั โ ะดะพะฑะฐะฒะปัะตััั ะฒ ัะฐะฑะปะธัั

---

## API Endpoints

### POST `/api/unsubscribe`

**ะะฐะทะฝะฐัะตะฝะธะต:** ะัะฟะธัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะพั ัะฐัััะปะบะธ

**Request:**
```json
{
  "email": "user@example.com"
}
```

**Response (Success):**
```json
{
  "success": true,
  "message": "Erfolgreich abgemeldet",
  "updated": {
    "profiles": 1,
    "subscribers": 1
  }
}
```

**Response (Error):**
```json
{
  "error": "E-Mail nicht gefunden in der Datenbank"
}
```

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- ะกััะฐะฝะธัะฐ `/unsubscribe` ะธัะฟะพะปัะทัะตั ััะพั API
- ะะฑัะพะดะธั RLS ะพะณัะฐะฝะธัะตะฝะธั ัะตัะตะท service role key
- ะะฑะฝะพะฒะปัะตั `profiles.newsletter_enabled = false`
- ะฃะดะฐะปัะตั ะทะฐะฟะธัั ะธะท `newsletter_subscribers`

### GET/POST `/api/profile/newsletter`

**ะะฐะทะฝะฐัะตะฝะธะต:** ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะดะฟะธัะบะพะน ัะตะบััะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั

**Request (POST):**
```json
{
  "newsletter_enabled": true
}
```

**Response:**
```json
{
  "success": true,
  "newsletter_enabled": true
}
```

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- ะะพะบะฐ ะฝะต ะธัะฟะพะปัะทัะตััั ะฝะฐะฟััะผัั
- ะะพะถะฝะพ ะดะพะฑะฐะฒะธัั ะพัะดะตะปัะฝัั ะบะฝะพะฟะบั ะดะปั ะฑััััะพะณะพ ัะฟัะฐะฒะปะตะฝะธั

---

## ะฎัะธะดะธัะตัะบะพะต ัะพะพัะฒะตัััะฒะธะต (GDPR)

### โ ะะฑัะทะฐัะตะปัะฝัะต ัะปะตะผะตะฝัั (ัะตะฐะปะธะทะพะฒะฐะฝั):

1. **ะกััะปะบะฐ ะพัะฟะธัะบะธ ะฒ ะบะฐะถะดะพะผ ะฟะธััะผะต** โ
   - ะะพะฑะฐะฒะปะตะฝะฐ ะฒ ัััะตั: "Abmelden"
   - ะะฐะฑะพัะฐะตั ะพะดะฝะธะผ ะบะปะธะบะพะผ

2. **ะคะธะทะธัะตัะบะธะน ะฐะดัะตั ะบะพะผะฟะฐะฝะธะธ** โ
   ```
   Beauty Salon
   Musterstraรe 123, 10115 Berlin, Deutschland
   Telefon: +49 30 12345678
   E-Mail: info@beautysalon.de
   ```

3. **ะะฝัะพัะผะฐัะธั ะพ ะฟะพะดะฟะธัะบะต** โ
   ```
   "Sie erhalten diese E-Mail, weil Sie sich fรผr 
   unseren Newsletter angemeldet haben."
   ```

4. **ะัะพััะฐั ะพัะฟะธัะบะฐ** โ
   - ะะดะธะฝ ะบะปะธะบ ะฑะตะท ะฐะฒัะพัะธะทะฐัะธะธ
   - ะะพะฝััะฝะฐั ัััะฐะฝะธัะฐ ะฟะพะดัะฒะตัะถะดะตะฝะธั

5. **ะฃะฟัะฐะฒะปะตะฝะธะต ะฒ ะฟัะพัะธะปะต** โ
   - ะงะตะบะฑะพะบั ะฒ ะฝะฐัััะพะนะบะฐั
   - ะะฟะธัะฐะฝะธะต ะฟัะตะธะผััะตััะฒ

---

## ะขะตััะธัะพะฒะฐะฝะธะต

### ะัะพะฒะตัะบะฐ ะพัะฟะธัะบะธ ะธะท ะฟะธััะผะฐ:

1. ะัะฟัะฐะฒััะต ัะตััะพะฒัั ัะฐัััะปะบั ัะตะฑะต
2. ะัะบัะพะนัะต ะฟะธััะผะพ
3. ะะปะธะบะฝะธัะต "Abmelden" ะฒ ัััะตัะต
4. ะฃะฑะตะดะธัะตัั ััะพ ะพัะบััะปะฐัั ัััะฐะฝะธัะฐ `/unsubscribe`
5. ะัะพะฒะตัััะต ัะพะพะฑัะตะฝะธะต "Erfolgreich abgemeldet"
6. ะัะพะฒะตัััะต ะะ: `newsletter_enabled = false`

### ะัะพะฒะตัะบะฐ ัะฟัะฐะฒะปะตะฝะธั ะฒ ะฟัะพัะธะปะต:

1. ะะพะนะดะธัะต ะฒ ะฐะบะบะฐัะฝั
2. ะัะบัะพะนัะต `/profile`
3. ะะฐะนะดะธัะต ัะตะบัะธั "Newsletter-Einstellungen"
4. ะกะฝะธะผะธัะต ะณะฐะปะพัะบั
5. ะะฐะถะผะธัะต "Speichern"
6. ะัะพะฒะตัััะต ัะพะพะฑัะตะฝะธะต ะพะฑ ััะฟะตัะต
7. ะะฑะฝะพะฒะธัะต ัััะฐะฝะธัั - ะณะฐะปะพัะบะฐ ะดะพะปะถะฝะฐ ะฑััั ัะฝััะฐ

### ะัะพะฒะตัะบะฐ ะฟะพะฒัะพัะฝะพะน ะฟะพะดะฟะธัะบะธ:

1. ะ ะฟัะพัะธะปะต ะฟะพััะฐะฒััะต ะณะฐะปะพัะบั
2. ะกะพััะฐะฝะธัะต
3. ะัะฟัะฐะฒััะต ะฝะพะฒัั ัะฐัััะปะบั
4. ะฃะฑะตะดะธัะตัั ััะพ ะฟะธััะผะพ ะฟัะธัะปะพ

---

## ะะฝะตัะฝะธะน ะฒะธะด

### ะกััะฐะฝะธัะฐ ะพัะฟะธัะบะธ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          Header                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                     โ
โ         โ Checkmark Icon            โ
โ                                     โ
โ   Erfolgreich abgemeldet            โ
โ                                     โ
โ   Sie wurden erfolgreich von        โ
โ   unserem Newsletter abgemeldet.    โ
โ                                     โ
โ   [Zur Startseite]                  โ
โ                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ          Footer                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะัะพัะธะปั (Newsletter ัะตะบัะธั):

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ Newsletter-Einstellungen         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ Ich mรถchte Newsletter erhalten    โ
โ                                     โ
โ   Erhalten Sie exklusive Angebote,  โ
โ   neue Produkte und Beauty-Tipps    โ
โ   per E-Mail.                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
beauty-salon-shop/
โโโ app/
โ   โโโ profile/
โ   โ   โโโ page.tsx              # โ ะะพะฑะฐะฒะปะตะฝ ัะตะบะฑะพะบั ะฟะพะดะฟะธัะบะธ
โ   โโโ unsubscribe/
โ   โ   โโโ page.tsx              # โ ะะพะฒะฐั ัััะฐะฝะธัะฐ ะพัะฟะธัะบะธ
โ   โโโ api/
โ       โโโ admin/
โ       โ   โโโ newsletter/
โ       โ       โโโ send/
โ       โ           โโโ route.ts  # โ ะะฑะฝะพะฒะปะตะฝ ั ะฟะตััะพะฝะฐะปัะฝะพะน ัััะปะบะพะน
โ       โโโ profile/
โ           โโโ newsletter/
โ               โโโ route.ts      # โ ะะพะฒัะน API ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟะพะดะฟะธัะบะพะน
```

---

## ะะฑะฝะพะฒะธัะต ะบะพะฝัะฐะบัั ะฒ ะฟะธััะผะต!

โ๏ธ **ะะะะะ**: ะะฐะผะตะฝะธัะต ัะตััะพะฒัะต ะดะฐะฝะฝัะต ะฝะฐ ัะตะฐะปัะฝัะต ะฒ ัะฐะนะปะต `send/route.ts`:

```typescript
<strong>Beauty Salon</strong><br>
[ะะะจ ะะะะะฌะะซะ ะะะะะก]<br>
Telefon: [ะะะจ ะขะะะะคะะ]<br>
E-Mail: [ะะะจ EMAIL]
```

---

## ะงัะพ ะดะฐะปััะต?

### ะะฟัะธะพะฝะฐะปัะฝะพ ะผะพะถะฝะพ ะดะพะฑะฐะฒะธัั:

- [ ] Email ะฟะพะดัะฒะตัะถะดะตะฝะธะต ะพัะฟะธัะบะธ
- [ ] ะกัะฐัะธััะธะบะฐ ะพัะฟะธัะพะบ ะฒ ะฐะดะผะธะฝะบะต
- [ ] ะัะธัะธะฝะฐ ะพัะฟะธัะบะธ (ัะพัะผะฐ ะพะฑัะฐัะฝะพะน ัะฒัะทะธ)
- [ ] ะัะตะผะตะฝะฝะฐั ะพัะฟะธัะบะฐ (ะฟะฐัะทะฐ ะฝะฐ ะผะตััั)
- [ ] ะัะฑะพั ัะธะฟะฐ ัะฐัััะปะพะบ (ะฐะบัะธะธ/ะฝะพะฒะพััะธ/ัะพะฒะตัั)

---

## ะัะพะณะพ

โ **ะัะฟะธัะบะฐ ะธะท ะฟะธัะตะผ ัะฐะฑะพัะฐะตั** (ะพะดะธะฝ ะบะปะธะบ)  
โ **ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะดะฟะธัะบะพะน ะฒ ะฟัะพัะธะปะต ัะฐะฑะพัะฐะตั**  
โ **GDPR-compliant** (ะฒัะต ััะตะฑะพะฒะฐะฝะธั ะฒัะฟะพะปะฝะตะฝั)  
โ **ะัะฐัะธะฒะพะต ะพัะพัะผะปะตะฝะธะต**  
โ **ะฃะดะพะฑะฝะพ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน**

**ะกะธััะตะผะฐ ะฟะพะปะฝะพัััั ะณะพัะพะฒะฐ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั! ๐**
